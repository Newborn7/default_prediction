# default_prediction
**Задачи:**
- выполнить анализ и охарактеризовать клиентский портфель организации
- построить базовую модель прогнозирования банкротства, одобряющую не менее 35% клиентов при банкротстве среди одобренных не выше 15%.
- подготовить рекомендации и предложения по изменению признакового пространства, использованию внешних данных и иному развитию базовой модели.

**Препроцессинг данных**
- удаляю колонку “Unnamed: 0”, так как она по сути дублирует индексы.
- в колонке с признаком “ratio_sum_outstanding_to_open_sum” есть 2800 пропущенных значений, 69 значение +/- Inf, 5264 значения меньше нуля или больше 1, что для отношения быть не должно. Таким образом, суммарно получается 19% нерелевантных значений. Поэтому удаляю колонку с этим признаком из датасета.
-  Признаки “ratio_overdue_loans_3_to_12” , “overdue_loans_3” и “overdue_loans_12” фактически представляют собой константу, поэтому на таргет не влияют и их также удаляю из датасета.
- у признака “ratio_mean_delay_3_to_12” 6,0% пропущенных значений, заполняю их медианным значением по признаку.
- после этих преобразований остается еще 729 пропущенных значений в 11 колонках, поскольку относительная доля этих пропущенных значений не велика, то удаляю соответствующие строки.
- удаляю из датасета 187 строк-дубликатов.
- у признаков ‘last_microloan_oeneddpt’ и 'open_loan_median' есть несколько сотен значений-выбросов в районе 20тысяч и 40 тысяч дней. Полагаю, что значения в этих признаках больше 15000 дней (более 40 лет) ошибочны, и эти строки удаляю из датасета.
- Есть также вопросы к признаку 'isnt_active_100', так они почти все больше 1 и временами сильно. А это доля. Если это выражено в %, то все равно есть 6201 строк, где значение больше 100. Поэтому удаляю этот признак.
  
Таким образом, после обработки датасета new_training_data осталось 68 признаков и 41642 наблюдения.

**Характеристика клиентского портфеля организации**

- Большая часть заемщиков представляет собой молодые люди с медианным возрастом 33 года. То есть половина всех клиентов имеет возраст до 33 лет.
Наименьшая доля банкротства среди клиентов возрастной группы 40-49.
- Количество всех активных кредитов (признак ‘is_active_100’): среднее значение 21, медиана – 18. При этом средняя доля невозвратов (признак “ratio_history_100”) достаточно маленькая – 1% и для абсолютного большинства клиентов (97,5%) этот показатель лежит в пределах 10%. То есть в целом, клиенты склонны возвращать кредиты и не уходить в банкротство.
- Большая часть активных кредитов взята за последний год, что подтверждает данные о небольшой средней доле невозвратов: большая часть кредитов, взятых более года назад сейчас клиентами погашены. При этом за последний год клиенты стали активнее брать кредитные продукты : 77% (среднее) всех кредитов взяты за последний год, а 51% за последние 3 месяца (признаки fraction_last_x_12 и fraction_last_x_3). Эта же тенденция прослеживается и по признаку ‘ratio_all_microloans_3_to_12’: большая часть микрокредитов за год взята в последние 3 месяца. Причиной этому может быть макроэкономическая ситуация в стране или же более активная маркетинговая политика кредитной организации по привлечению новых клиентов.  Было бы интересно посмотреть на эти показатели в зависимости от типа кредитного продукта.
- Среднее количество  на клиента всех кредитных продуктов в разрезе  'кредитная карта'/ 'потребительский кредит'/ 'микрокредит' составляет 3.2/5.5/85.9.  При этом среднее количество всех кредитов в истории (признак count_all_credits) составляет 96.97 (медиана – 69).
При этом среднее количество  на клиента только активных  кредитных продуктов в разрезе  'кредитная карта'/ 'потребительский кредит'/ 'микрокредит' составляет 2.1/1.2/17.4. То есть микрокредиты являются самым массовым кредитных продуктом как среди все взятых кредитов, так и среди активных кредитов.
- Также наблюдается тенденция к уменьшению как среднего, так и медианного значения величины активного кредита в ряду последние 12 месяцев – 3 месяца -1 месяц: снижение на 42%. Это же наблюдение справедливо и отдельно для группы микрокредиты, но в меньшей степени: снижение на 14%.

**Базовая модель прогнозирования**

Построена базовая модель на основе алгоритма Catboost c гиперпараметрами, которая выявляла 36% клиентов класса "0" (отсутствие банкротства) с точностью 85%, то есть доля банкротства среди одобренных не выше 15%. Наиболее значимыми для модели оказались признаки overall_worst_overdue_state_12, age, isnt_active_1, fraction_last_x_3, mean_delay_12_with_lag, ratio_all_microloans_3_to_12.

**Предложения по развитию базовой модели прогнозирования**

Имеет смысл добавить следующие признаки: пол заявитеоя, наличие работы, продолжительность работы на текущем месте работы, как часто меняет работу, общий трудовой стаж, должность на текущем месте работы (чем выше, тем лучше), работа в частном секторе или на государство, ежемесячный доход заявителя, семейный статус, наличие детей, наличие выплат по алиментам, общий ежемесячный доход домохозяйства, образование (чем выше, тем лучше), наличие движимого имущества, наличие недвижимого имущества, проживает ли в съемной квартире или в собственной, наличие рискованной работы, наличие судимости, наличие дополнительных источников доходов (например, пенсия, банковские вклады, сдача недвижимости в аренду и т.д.), наличие инвалидности, являлся ли прежде клиентом этой кредитной организации и, если да, вовремя ли проводил выплаты.
Для этого помимо заполнения заявителем анкеты необходимо сделать запросы в бюро кредитных историй, базу судебных приставов.

